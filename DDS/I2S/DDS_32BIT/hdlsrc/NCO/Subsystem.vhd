-- -------------------------------------------------------------
-- 
-- File Name: F:\Git_Repository\FPGA_myself\DDS\DDS_CSDN\DDS_32BIT\hdlsrc\NCO\Subsystem.vhd
-- Created: 2023-09-22 17:10:45
-- 
-- Generated by MATLAB 9.14 and HDL Coder 4.1
-- 
-- -------------------------------------------------------------


-- -------------------------------------------------------------
-- 
-- Module: Subsystem
-- Source Path: NCO/Subsystem
-- Hierarchy Level: 1
-- 
-- -------------------------------------------------------------
LIBRARY IEEE;
USE IEEE.std_logic_1164.ALL;
USE IEEE.numeric_std.ALL;

ENTITY Subsystem IS
  PORT( clk                               :   IN    std_logic;
        reset                             :   IN    std_logic;
        enb                               :   IN    std_logic;
        In1                               :   IN    std_logic_vector(31 DOWNTO 0);  -- uint32
        NCO_VLD_OUT                       :   OUT   std_logic;
        WAVE_Out                          :   OUT   std_logic_vector(15 DOWNTO 0);  -- sfix16_En13
        FIR_VLD_OUT1                      :   OUT   std_logic
        );
END Subsystem;


ARCHITECTURE rtl OF Subsystem IS

  ATTRIBUTE multstyle : string;

  -- Component Declarations
  COMPONENT NCO_block
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          inc                             :   IN    std_logic_vector(31 DOWNTO 0);  -- uint32
          validIn                         :   IN    std_logic;
          sine                            :   OUT   std_logic_vector(15 DOWNTO 0);  -- sfix16_En14
          validOut                        :   OUT   std_logic
          );
  END COMPONENT;

  COMPONENT Discrete_FIR_Filter
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          dataIn                          :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En14
          validIn                         :   IN    std_logic;
          dataOut                         :   OUT   std_logic_vector(15 DOWNTO 0);  -- sfix16_En13
          validOut                        :   OUT   std_logic
          );
  END COMPONENT;

  -- Component Configuration Statements
  FOR ALL : NCO_block
    USE ENTITY work.NCO_block(rtl);

  FOR ALL : Discrete_FIR_Filter
    USE ENTITY work.Discrete_FIR_Filter(rtl);

  -- Signals
  SIGNAL Constant_out1                    : std_logic;
  SIGNAL NCO_out1                         : std_logic_vector(15 DOWNTO 0);  -- ufix16
  SIGNAL NCO_out2                         : std_logic;
  SIGNAL Discrete_FIR_Filter_out1         : std_logic_vector(15 DOWNTO 0);  -- ufix16
  SIGNAL Discrete_FIR_Filter_out2         : std_logic;

BEGIN
  u_NCO : NCO_block
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              inc => In1,  -- uint32
              validIn => Constant_out1,
              sine => NCO_out1,  -- sfix16_En14
              validOut => NCO_out2
              );

  u_Discrete_FIR_Filter : Discrete_FIR_Filter
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              dataIn => NCO_out1,  -- sfix16_En14
              validIn => Constant_out1,
              dataOut => Discrete_FIR_Filter_out1,  -- sfix16_En13
              validOut => Discrete_FIR_Filter_out2
              );

  Constant_out1 <= '1';

  NCO_VLD_OUT <= NCO_out2;

  WAVE_Out <= Discrete_FIR_Filter_out1;

  FIR_VLD_OUT1 <= Discrete_FIR_Filter_out2;

END rtl;

